{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n    const URL = \"https://pixabay.com/api/\";\n    const API_KEY = \"45320623-f265cdcadbbe2c6a410e5ea22\";\n    \nexport async function searchGalleryQuery(query, page = 1) {\n    try {\n        const response = await axios.get(URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: 15,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n    const lightbox = new SimpleLightbox('.gallery-list a', {\n        captions: true,\n        captionsData: 'alt',\n        captionsDelay: 250\n    });\n\nexport function createImages(data) {\n\n    const galleryList = document.querySelector('.gallery-list');\n\n    let images = data.hits.map((image) =>\n        `<div class=\"image-wrapper\">\n    <a href=\"${image.largeImageURL}\">\n    <img class=\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></img>\n    </a>\n    <div class=\"text-wrapper\">\n    <div class=\"text-item\"><h5 class=\"text-header\">Likes</h5><p class=\"text-paragraph\">${image.likes}</p></div>\n    <div class=\"text-item\"><h5 class=\"text-header\">Views</h5><p class=\"text-paragraph\">${image.views}</p></div>\n    <div class=\"text-item\"><h5 class=\"text-header\">Comments</h5><p class=\"text-paragraph\">${image.comments}</p></div>\n    <div class=\"text-item\"><h5 class=\"text-header\">Downloads</h5><p class=\"text-paragraph\">${image.downloads}</p></div>\n    </div>\n    </div>`)\n        .join(\"\");\n        \n    galleryList.insertAdjacentHTML('beforeend', images);\n    lightbox.refresh();\n}\n\nexport function clearImages() {\n    const galleryList = document.querySelector('.gallery-list');\n    galleryList.innerHTML = \"\";\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchGalleryQuery } from \"./js/pixabay-api\";\nimport { createImages, clearImages } from \"./js/render-functions\";\n\nconst form = document.querySelector('.form-gallery');\nconst input = document.querySelector('.form-gallery-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst scrollToTopBtn = document.querySelector('.scroll-to-top')\n\nlet currentPage = 1;\nlet currentQuery = \"\";\n\nform.addEventListener('submit', handleSubmitBtn);\nloadMoreBtn.addEventListener('click', handleLoadMore);\nscrollToTopBtn.addEventListener('click', scrollToTop);\n\nasync function handleSubmitBtn(event) {\n    event.preventDefault();\n    clearImages();\n    loader.classList.remove('hidden');\n    loadMoreBtn.classList.add('hidden');\n\n    currentQuery = input.value.trim();\n    currentPage = 1;\n\n    await fetchImages();\n\n    form.reset();\n}\n\nasync function handleLoadMore() {\n    currentPage += 1;\n    loadMoreBtn.classList.add('hidden'); // Вимикаємо кнопку між запитами\n    loader.classList.remove('hidden');\n    await fetchImages();\n}\n\nasync function fetchImages() {\n    try {\n        const data = await searchGalleryQuery(currentQuery, currentPage);\n        loader.classList.add('hidden');\n        if (data.total === 0 || currentQuery === \"\") {\n            iziToast.error({\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            loadMoreBtn.classList.add('hidden');// Ховаємо кнопку при поганому запиті\n            return;\n        }\n        createImages(data);\n        if (data.hits.length === 0 || currentPage * 15 >= data.totalHits) {\n            loadMoreBtn.classList.add('hidden');\n            iziToast.info({\n                position: 'topRight',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        } else {\n            loadMoreBtn.classList.remove('hidden'); // Показуємо кнопку після успішного завантаження даних\n        }\n        smoothScroll();\n        showScrollToTopBtn();\n    } catch (error) {\n        console.error(error);\n        loader.classList.add('hidden');\n    }\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector('.gallery-list').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\nfunction showScrollToTopBtn() {\n    if (window.scrollY > 1000) {\n        scrollToTopBtn.classList.remove('hidden');\n    } else {\n        scrollToTopBtn.classList.add('hidden');\n    }\n}\n\nfunction scrollToTop() {\n    window.scrollTo({\n        top: 0,\n        behavior: 'auto',\n    });\n}\n\nwindow.addEventListener('scroll', scrollToTopBtn);"],"names":["URL","API_KEY","searchGalleryQuery","query","page","axios","error","lightbox","SimpleLightbox","createImages","data","galleryList","images","image","clearImages","form","input","loader","loadMoreBtn","scrollToTopBtn","currentPage","currentQuery","handleSubmitBtn","handleLoadMore","scrollToTop","event","fetchImages","iziToast","smoothScroll","showScrollToTopBtn","cardHeight"],"mappings":"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"}